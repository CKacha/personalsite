---
import "../styles/global.css";
import Topbar from "../components/Topbar.astro";
const BASE = import.meta.env.BASE_URL;
import StatusBox from '../components/StatusBox.astro';

---

<html lang="en" data-theme="dark" data-base={BASE}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href={BASE + 'favicon.svg'} />
    <link rel="shortcut icon" type="image/svg+xml" href={BASE + 'favicon.svg'} />
    <title>alive</title>
  </head>
  <body>
	<div id="boot" class="boot">
		<pre id="boot-lines" class="boot-lines"></pre>
	</div>
	<div id="flash" class="flash" aria-hidden="true"></div>
	<div id="reveal" class="reveal" aria-hidden="true">
		<div class="bar bar-left"></div>
		<div class="bar bar-right"></div>
	</div>

    <Topbar />

    <main class="wrap">
      <h1 id="hello" class="type-caret"></h1>
      <p>I'm a Junior in high school, and I create stuff</p>

      <section aria-label="my socials" class="ticker b-solid">
		<div class="ticker-head">my socials</div>

		<div class="ticker-viewport">
			<div class="ticker-track">
			<span class="item"><a href="https://github.com/ChanminK" target="_blank" rel="noreferrer">github.com/ChanminK</a></span>
			<span class="sep">•</span>
			<span class="item">@Iamalive (slack)</span>
			<span class="sep">•</span>
			<span class="item">thisischanmin@gmail.com</span>
			<span class="sep">•</span>
			<span class="item"><a href="https://github.com/ChanminK" target="_blank" rel="noreferrer">github.com/ChanminK</a></span>
			<span class="sep">•</span>
			<span class="item">@Iamalive (slack)</span>
			<span class="sep">•</span>
			<span class="item">thisischanmin@gmail.com</span>
			</div>

			<div class="ticker-track" aria-hidden="true">
			<span class="item"><a href="https://github.com/ChanminK" target="_blank" rel="noreferrer">github.com/ChanminK</a></span>
			<span class="sep">•</span>
			<span class="item">@Iamalive (slack)</span>
			<span class="sep">•</span>
			<span class="item">thisischanmin@gmail.com</span>
			<span class="sep">•</span>
			<span class="item"><a href="https://github.com/ChanminK" target="_blank" rel="noreferrer">github.com/ChanminK</a></span>
			<span class="sep">•</span>
			<span class="item">@Iamalive (slack)</span>
			<span class="sep">•</span>
			<span class="item">thisischanmin@gmail.com</span>
			</div>
		</div>
      </section>
    </main>

	<script is:inline>
		(function(){
		var boot   = document.getElementById('boot');
		var out    = document.getElementById('boot-lines');
		var flash  = document.getElementById('flash');
		var reveal = document.getElementById('reveal');
		if (!boot || !out || !flash || !reveal) return;

		var lines = ["> booting aliveOS...","> loading thoughts...","> ready."];

		var charDelay = 35, linePause = 350, reduce = false;
		try { reduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches; } catch(e){}
		if (reduce){ charDelay = 0; linePause = 120; }

		var li=0, ci=0;

		function typeChar(){
			if (li >= lines.length){
			boot.classList.add("boot--hide");

			if (!reduce){
				flash.classList.add("flash--go");
				setTimeout(function(){ reveal.classList.add("reveal--go"); }, 110);
				setTimeout(finishBoot, 600);
			} else {
				finishBoot();
			}
			return;
			}
			var text = lines[li];
			if (ci === 0 && li > 0) out.appendChild(document.createTextNode("\n"));
			out.appendChild(document.createTextNode(text.charAt(ci++)));
			if (ci < text.length) setTimeout(typeChar, charDelay);
			else { ci = 0; li++; setTimeout(typeChar, linePause); }
		}

		function finishBoot(){
			try { flash.remove(); reveal.remove(); } catch(e){}
			document.dispatchEvent(new CustomEvent("boot:done"));
		}

		typeChar();
		})();
	</script>

	<script is:inline>
		(function(){
		document.addEventListener("boot:done", function(){
			var el = document.getElementById("hello");
			if (!el) return;
			var text = "Hi, I'm Alive";
			var i = 0, delay = 45;
			try { if (window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches) delay = 0; } catch(e){}
			(function next(){ if (i < text.length){ el.textContent += text.charAt(i++); setTimeout(next, delay); } else { el.classList.remove("type-caret"); } })();
		});
		})();
	</script>
	
	<section style="margin-block-end: clamp(3rem, 8vh, 10rem);"></section>

	<StatusBox
	label="Now Playing"
	value="lo-fi study loop"
	mode="docked"
	storageKey="statusbox-now"
	/>

	<footer class="site-footer">made with astro + Need coffee</footer>
  </body>
</html>